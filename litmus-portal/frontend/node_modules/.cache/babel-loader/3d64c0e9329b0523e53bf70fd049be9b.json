{"ast":null,"code":"import _slicedToArray from \"/home/raj/go/src/github.com/litmuschaos/litmus/litmus-portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/raj/go/src/github.com/litmuschaos/litmus/litmus-portal/frontend/src/pages/HomePage/index.tsx\";\n\nimport { useQuery } from '@apollo/client';\nimport { Card, CardActionArea, Typography } from '@material-ui/core';\nimport Backdrop from '@material-ui/core/Backdrop/Backdrop';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\nimport React, { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\nimport IconButton from '@material-ui/core/IconButton';\nimport InfoFilledWrap from '../../components/InfoFilled';\nimport Loader from '../../components/Loader';\nimport QuickActionCard from '../../components/QuickActionCard';\nimport WelcomeModal from '../../components/WelcomeModal';\nimport Center from '../../containers/layouts/Center';\nimport Scaffold from '../../containers/layouts/Scaffold';\nimport { GET_USER } from '../../graphql';\nimport useActions from '../../redux/actions';\nimport * as TabActions from '../../redux/actions/tabs';\nimport * as TemplateSelectionActions from '../../redux/actions/template';\nimport * as UserActions from '../../redux/actions/user';\nimport configureStore, { history } from '../../redux/configureStore';\nimport ReturningHome from '../../views/Home/ReturningHome';\nimport useStyles from './style';\nimport ButtonFilled from '../../components/Button/ButtonFilled';\nimport * as WorkflowActions from '../../redux/actions/workflow';\n\nvar CreateWorkflowCard = function CreateWorkflowCard() {\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  var classes = useStyles();\n  var template = useActions(TemplateSelectionActions);\n  var workflowAction = useActions(WorkflowActions);\n\n  var handleCreateWorkflow = function handleCreateWorkflow() {\n    workflowAction.setWorkflowDetails({\n      isCustomWorkflow: false,\n      customWorkflows: []\n    });\n    template.selectTemplate({\n      selectedTemplateID: 0,\n      isDisable: true\n    });\n    history.push('/create-workflow');\n  };\n\n  return /*#__PURE__*/React.createElement(Card, {\n    elevation: 3,\n    className: classes.createWorkflowCard,\n    onClick: handleCreateWorkflow,\n    \"data-cy\": \"createWorkflow\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CardActionArea, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    className: classes.createWorkflowHeading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, t('home.workflow.heading')), /*#__PURE__*/React.createElement(Typography, {\n    className: classes.createWorkflowTitle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, t('home.workflow.info')), /*#__PURE__*/React.createElement(ArrowForwardIcon, {\n    className: classes.arrowForwardIcon,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  })));\n};\n\nvar HomePage = function HomePage() {\n  var _data$getUser$name;\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      isOpen = _useState2[0],\n      setIsOpen = _useState2[1];\n\n  var userData = useSelector(function (state) {\n    return state.userData;\n  });\n  var classes = useStyles();\n\n  var _useTranslation2 = useTranslation(),\n      t = _useTranslation2.t;\n\n  var user = useActions(UserActions);\n  var tabs = useActions(TabActions); // Use the persistor object\n\n  var _configureStore = configureStore(),\n      persistor = _configureStore.persistor; // Query to get user details\n\n\n  var _useQuery = useQuery(GET_USER, {\n    variables: {\n      username: userData.username\n    }\n  }),\n      data = _useQuery.data,\n      loading = _useQuery.loading;\n\n  var name = (_data$getUser$name = data === null || data === void 0 ? void 0 : data.getUser.name) !== null && _data$getUser$name !== void 0 ? _data$getUser$name : '';\n\n  var handleModal = function handleModal() {\n    setIsOpen(false);\n  };\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      dataPresent = _useState4[0],\n      setDataPresent = _useState4[1];\n\n  useEffect(function () {\n    if ((data === null || data === void 0 ? void 0 : data.getUser.username) === userData.username) {\n      setIsOpen(false);\n\n      if (userData.selectedProjectID === '') {\n        var _data$getUser$project;\n\n        var isOwnerOfProject = {\n          id: '',\n          name: ''\n        };\n        var projectList = (_data$getUser$project = data === null || data === void 0 ? void 0 : data.getUser.projects) !== null && _data$getUser$project !== void 0 ? _data$getUser$project : [];\n        projectList.forEach(function (project) {\n          var memberList = project.members;\n          memberList.forEach(function (member) {\n            if (member.user_name === (data === null || data === void 0 ? void 0 : data.getUser.username) && member.role === 'Owner') {\n              isOwnerOfProject = {\n                id: project.id,\n                name: project.name\n              };\n            }\n          });\n        });\n        user.updateUserDetails({\n          selectedProjectID: isOwnerOfProject.id,\n          userRole: 'Owner',\n          selectedProjectName: isOwnerOfProject.name,\n          selectedProjectOwner: userData.username\n        });\n        user.updateUserDetails({\n          loader: false\n        }); // Flush data to persistor immediately\n\n        persistor.flush();\n      }\n    }\n  }, [data]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 5\n    }\n  }, userData.loader ? /*#__PURE__*/React.createElement(Backdrop, {\n    open: true,\n    className: classes.backdrop,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Loader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Center, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h4\",\n    align: \"center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, \"Updating User Details\"))) : /*#__PURE__*/React.createElement(Scaffold, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }\n  }, isOpen && !loading ? /*#__PURE__*/React.createElement(WelcomeModal, {\n    handleIsOpen: handleModal,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.rootContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.root,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h3\",\n    className: classes.userName,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 15\n    }\n  }, t('home.heading'), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }\n  }, \" \".concat(name))), dataPresent ? /*#__PURE__*/React.createElement(ReturningHome, {\n    callbackToSetDataPresent: function callbackToSetDataPresent(dataPresent) {\n      setDataPresent(dataPresent);\n    },\n    currentStatus: dataPresent,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 17\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.headingDiv,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.mainDiv,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    className: classes.mainHeading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 25\n    }\n  }, t('home.subHeading1'))), /*#__PURE__*/React.createElement(Typography, {\n    className: classes.mainResult,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 25\n    }\n  }, t('home.subHeading2'))), /*#__PURE__*/React.createElement(Typography, {\n    className: classes.mainDesc,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 23\n    }\n  }, t('home.subHeading3')), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.predefinedBtn,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(ButtonFilled, {\n    handleClick: function handleClick() {\n      tabs.changeWorkflowsTabs(2);\n      history.push('/workflows');\n    },\n    isPrimary: false,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"subtitle1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 27\n    }\n  }, t('home.button1'))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.imageDiv,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"icons/applause.png\",\n    alt: \"Applause icon\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 23\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(CreateWorkflowCard, {\n    \"data-cy\": \"CreateWorkflowCard\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 21\n    }\n  }))), !dataPresent ? /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.contentDiv,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.statDiv,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.btnHeaderDiv,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    className: classes.statsHeading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 25\n    }\n  }, t('home.analytics.heading'))), /*#__PURE__*/React.createElement(IconButton, {\n    className: classes.seeAllBtn,\n    onClick: function onClick(event) {\n      event.preventDefault();\n      history.push('/community');\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.btnSpan,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    className: classes.btnText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 27\n    }\n  }, t('home.analytics.moreInfo')), /*#__PURE__*/React.createElement(\"img\", {\n    src: \"icons/next.png\",\n    alt: \"next\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 27\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.cardDiv,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(InfoFilledWrap, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 23\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.quickActionDiv,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(QuickActionCard, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 21\n    }\n  }))) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 17\n    }\n  })))));\n};\n\nexport default HomePage;","map":{"version":3,"sources":["/home/raj/go/src/github.com/litmuschaos/litmus/litmus-portal/frontend/src/pages/HomePage/index.tsx"],"names":["useQuery","Card","CardActionArea","Typography","Backdrop","ArrowForwardIcon","React","useEffect","useState","useTranslation","useSelector","IconButton","InfoFilledWrap","Loader","QuickActionCard","WelcomeModal","Center","Scaffold","GET_USER","useActions","TabActions","TemplateSelectionActions","UserActions","configureStore","history","ReturningHome","useStyles","ButtonFilled","WorkflowActions","CreateWorkflowCard","t","classes","template","workflowAction","handleCreateWorkflow","setWorkflowDetails","isCustomWorkflow","customWorkflows","selectTemplate","selectedTemplateID","isDisable","push","createWorkflowCard","createWorkflowHeading","createWorkflowTitle","arrowForwardIcon","HomePage","isOpen","setIsOpen","userData","state","user","tabs","persistor","variables","username","data","loading","name","getUser","handleModal","dataPresent","setDataPresent","selectedProjectID","isOwnerOfProject","id","projectList","projects","forEach","project","memberList","members","member","user_name","role","updateUserDetails","userRole","selectedProjectName","selectedProjectOwner","loader","flush","backdrop","rootContainer","root","userName","headingDiv","mainDiv","mainHeading","mainResult","mainDesc","predefinedBtn","changeWorkflowsTabs","imageDiv","contentDiv","statDiv","btnHeaderDiv","statsHeading","seeAllBtn","event","preventDefault","btnSpan","btnText","cardDiv","quickActionDiv"],"mappings":"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","sourcesContent":["import { useQuery } from '@apollo/client';\nimport { Card, CardActionArea, Typography } from '@material-ui/core';\nimport Backdrop from '@material-ui/core/Backdrop/Backdrop';\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\nimport React, { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\nimport IconButton from '@material-ui/core/IconButton';\nimport InfoFilledWrap from '../../components/InfoFilled';\nimport Loader from '../../components/Loader';\nimport QuickActionCard from '../../components/QuickActionCard';\nimport WelcomeModal from '../../components/WelcomeModal';\nimport Center from '../../containers/layouts/Center';\nimport Scaffold from '../../containers/layouts/Scaffold';\nimport { GET_USER } from '../../graphql';\nimport {\n  CurrentUserDedtailsVars,\n  CurrentUserDetails,\n  Member,\n  Project,\n} from '../../models/graphql/user';\nimport useActions from '../../redux/actions';\nimport * as TabActions from '../../redux/actions/tabs';\nimport * as TemplateSelectionActions from '../../redux/actions/template';\nimport * as UserActions from '../../redux/actions/user';\nimport configureStore, { history } from '../../redux/configureStore';\nimport { RootState } from '../../redux/reducers';\nimport ReturningHome from '../../views/Home/ReturningHome';\nimport useStyles from './style';\nimport ButtonFilled from '../../components/Button/ButtonFilled';\nimport * as WorkflowActions from '../../redux/actions/workflow';\n\nconst CreateWorkflowCard: React.FC = () => {\n  const { t } = useTranslation();\n  const classes = useStyles();\n  const template = useActions(TemplateSelectionActions);\n  const workflowAction = useActions(WorkflowActions);\n  const handleCreateWorkflow = () => {\n    workflowAction.setWorkflowDetails({\n      isCustomWorkflow: false,\n      customWorkflows: [],\n    });\n    template.selectTemplate({ selectedTemplateID: 0, isDisable: true });\n    history.push('/create-workflow');\n  };\n\n  return (\n    <Card\n      elevation={3}\n      className={classes.createWorkflowCard}\n      onClick={handleCreateWorkflow}\n      data-cy=\"createWorkflow\"\n    >\n      <CardActionArea>\n        <Typography className={classes.createWorkflowHeading}>\n          {t('home.workflow.heading')}\n        </Typography>\n        <Typography className={classes.createWorkflowTitle}>\n          {t('home.workflow.info')}\n        </Typography>\n        <ArrowForwardIcon className={classes.arrowForwardIcon} />\n      </CardActionArea>\n    </Card>\n  );\n};\n\nconst HomePage: React.FC = () => {\n  const [isOpen, setIsOpen] = useState<boolean>(true);\n\n  const userData = useSelector((state: RootState) => state.userData);\n  const classes = useStyles();\n  const { t } = useTranslation();\n  const user = useActions(UserActions);\n  const tabs = useActions(TabActions);\n  // Use the persistor object\n  const { persistor } = configureStore();\n\n  // Query to get user details\n  const { data, loading } = useQuery<\n    CurrentUserDetails,\n    CurrentUserDedtailsVars\n  >(GET_USER, {\n    variables: { username: userData.username },\n  });\n\n  const name: string = data?.getUser.name ?? '';\n\n  const handleModal = () => {\n    setIsOpen(false);\n  };\n\n  const [dataPresent, setDataPresent] = useState<boolean>(true);\n\n  useEffect(() => {\n    if (data?.getUser.username === userData.username) {\n      setIsOpen(false);\n      if (userData.selectedProjectID === '') {\n        let isOwnerOfProject = { id: '', name: '' };\n        const projectList: Project[] = data?.getUser.projects ?? [];\n        projectList.forEach((project) => {\n          const memberList: Member[] = project.members;\n          memberList.forEach((member) => {\n            if (\n              member.user_name === data?.getUser.username &&\n              member.role === 'Owner'\n            ) {\n              isOwnerOfProject = {\n                id: project.id,\n                name: project.name,\n              };\n            }\n          });\n        });\n        user.updateUserDetails({\n          selectedProjectID: isOwnerOfProject.id,\n          userRole: 'Owner',\n          selectedProjectName: isOwnerOfProject.name,\n          selectedProjectOwner: userData.username,\n        });\n        user.updateUserDetails({ loader: false });\n        // Flush data to persistor immediately\n        persistor.flush();\n      }\n    }\n  }, [data]);\n\n  return (\n    <div>\n      {userData.loader ? (\n        <Backdrop open className={classes.backdrop}>\n          <Loader />\n          <Center>\n            <Typography variant=\"h4\" align=\"center\">\n              Updating User Details\n            </Typography>\n          </Center>\n        </Backdrop>\n      ) : (\n        <Scaffold>\n          {isOpen && !loading ? (\n            <WelcomeModal handleIsOpen={handleModal} />\n          ) : (\n            <></>\n          )}\n          <div className={classes.rootContainer}>\n            <div className={classes.root}>\n              <Typography variant=\"h3\" className={classes.userName}>\n                {t('home.heading')}\n                <strong>{` ${name}`}</strong>\n              </Typography>\n              {dataPresent ? (\n                <ReturningHome\n                  callbackToSetDataPresent={(dataPresent: boolean) => {\n                    setDataPresent(dataPresent);\n                  }}\n                  currentStatus={dataPresent}\n                />\n              ) : (\n                <div className={classes.headingDiv}>\n                  <div className={classes.mainDiv}>\n                    <div>\n                      <Typography className={classes.mainHeading}>\n                        <strong>{t('home.subHeading1')}</strong>\n                      </Typography>\n                      <Typography className={classes.mainResult}>\n                        <strong>{t('home.subHeading2')}</strong>\n                      </Typography>\n                      <Typography className={classes.mainDesc}>\n                        {t('home.subHeading3')}\n                      </Typography>\n                      <div className={classes.predefinedBtn}>\n                        <ButtonFilled\n                          handleClick={() => {\n                            tabs.changeWorkflowsTabs(2);\n                            history.push('/workflows');\n                          }}\n                          isPrimary={false}\n                        >\n                          <Typography variant=\"subtitle1\">\n                            {t('home.button1')}\n                          </Typography>\n                        </ButtonFilled>\n                      </div>\n                    </div>\n                    <div className={classes.imageDiv}>\n                      <img src=\"icons/applause.png\" alt=\"Applause icon\" />\n                    </div>\n                  </div>\n                  <div>\n                    <CreateWorkflowCard data-cy=\"CreateWorkflowCard\" />\n                  </div>\n                </div>\n              )}\n              {!dataPresent ? (\n                <div className={classes.contentDiv}>\n                  <div className={classes.statDiv}>\n                    <div className={classes.btnHeaderDiv}>\n                      <Typography className={classes.statsHeading}>\n                        <strong>{t('home.analytics.heading')}</strong>\n                      </Typography>\n                      <IconButton\n                        className={classes.seeAllBtn}\n                        onClick={(event) => {\n                          event.preventDefault();\n                          history.push('/community');\n                        }}\n                      >\n                        <div className={classes.btnSpan}>\n                          <Typography className={classes.btnText}>\n                            {t('home.analytics.moreInfo')}\n                          </Typography>\n                          <img src=\"icons/next.png\" alt=\"next\" />\n                        </div>\n                      </IconButton>\n                    </div>\n                    <div className={classes.cardDiv}>\n                      <InfoFilledWrap />\n                    </div>\n                  </div>\n                  <div className={classes.quickActionDiv}>\n                    <QuickActionCard />\n                  </div>\n                </div>\n              ) : (\n                <div />\n              )}\n            </div>\n          </div>\n        </Scaffold>\n      )}\n    </div>\n  );\n};\n\nexport default HomePage;\n"]},"metadata":{},"sourceType":"module"}