{"ast":null,"code":"import _objectSpread from \"/home/raj/go/src/github.com/litmuschaos/litmus/litmus-portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n\n/* eslint-disable @typescript-eslint/no-unused-vars */\nimport jwtDecode from 'jsonwebtoken';\nimport { UserActions } from '../../models/redux/user';\nimport { setCookie } from '../../utils/cookies';\nimport createReducer from './createReducer';\nvar initialState = {\n  selectedProjectID: '',\n  username: 'admin',\n  selectedProjectName: 'Default',\n  userRole: 'Owner',\n  name: '',\n  email: '',\n  loader: false,\n  selectedProjectOwner: ''\n};\nexport var userData = createReducer(initialState, {\n  [UserActions.LOAD_USER_DETAILS](state, action) {\n    try {\n      var jwt = action.payload;\n      var data = jwtDecode.decode(jwt);\n      var expirationTime = (data.exp - data.iat) / 3600;\n      setCookie('token', jwt, expirationTime);\n      return _objectSpread(_objectSpread({}, state), data);\n    } catch (err) {\n      console.error('ERROR: ', err);\n      return _objectSpread({}, state);\n    }\n  },\n\n  [UserActions.UPDATE_USER_DETAILS](state, action) {\n    return _objectSpread(_objectSpread({}, state), action.payload);\n  },\n\n  [UserActions.LOGOUT_USER](state, action) {\n    setCookie('token', '', 1);\n    return _objectSpread({}, initialState);\n  }\n\n});\nexport default userData;","map":{"version":3,"sources":["/home/raj/go/src/github.com/litmuschaos/litmus/litmus-portal/frontend/src/redux/reducers/user.ts"],"names":["jwtDecode","UserActions","setCookie","createReducer","initialState","selectedProjectID","username","selectedProjectName","userRole","name","email","loader","selectedProjectOwner","userData","LOAD_USER_DETAILS","state","action","jwt","payload","data","decode","expirationTime","exp","iat","err","console","error","UPDATE_USER_DETAILS","LOGOUT_USER"],"mappings":";;AAAA;AACA,OAAOA,SAAP,MAAsB,cAAtB;AACA,SAGEC,WAHF,QAKO,yBALP;AAMA,SAASC,SAAT,QAA0B,qBAA1B;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AAEA,IAAMC,YAAsB,GAAG;AAC7BC,EAAAA,iBAAiB,EAAE,EADU;AAE7BC,EAAAA,QAAQ,EAAE,OAFmB;AAG7BC,EAAAA,mBAAmB,EAAE,SAHQ;AAI7BC,EAAAA,QAAQ,EAAE,OAJmB;AAK7BC,EAAAA,IAAI,EAAE,EALuB;AAM7BC,EAAAA,KAAK,EAAE,EANsB;AAO7BC,EAAAA,MAAM,EAAE,KAPqB;AAQ7BC,EAAAA,oBAAoB,EAAE;AARO,CAA/B;AAWA,OAAO,IAAMC,QAAQ,GAAGV,aAAa,CAAWC,YAAX,EAAyB;AAC5D,GAACH,WAAW,CAACa,iBAAb,EAAgCC,KAAhC,EAAiDC,MAAjD,EAAqE;AACnE,QAAI;AACF,UAAMC,GAAG,GAAGD,MAAM,CAACE,OAAnB;AACA,UAAMC,IAAS,GAAGnB,SAAS,CAACoB,MAAV,CAAiBH,GAAjB,CAAlB;AACA,UAAMI,cAAc,GAAG,CAACF,IAAI,CAACG,GAAL,GAAWH,IAAI,CAACI,GAAjB,IAAwB,IAA/C;AACArB,MAAAA,SAAS,CAAC,OAAD,EAAUe,GAAV,EAAeI,cAAf,CAAT;AAEA,6CACKN,KADL,GAEKI,IAFL;AAID,KAVD,CAUE,OAAOK,GAAP,EAAY;AACZC,MAAAA,OAAO,CAACC,KAAR,CAAc,SAAd,EAAyBF,GAAzB;AACA,+BACKT,KADL;AAGD;AACF,GAlB2D;;AAmB5D,GAACd,WAAW,CAAC0B,mBAAb,EAAkCZ,KAAlC,EAAmDC,MAAnD,EAAuE;AACrE,2CACKD,KADL,GAEMC,MAAM,CAACE,OAFb;AAID,GAxB2D;;AAyB5D,GAACjB,WAAW,CAAC2B,WAAb,EAA0Bb,KAA1B,EAA2CC,MAA3C,EAA+D;AAC7Dd,IAAAA,SAAS,CAAC,OAAD,EAAU,EAAV,EAAc,CAAd,CAAT;AACA,6BACKE,YADL;AAGD;;AA9B2D,CAAzB,CAA9B;AAiCP,eAAeS,QAAf","sourcesContent":["/* eslint-disable @typescript-eslint/no-unused-vars */\nimport jwtDecode from 'jsonwebtoken';\nimport {\n  UpdateUser,\n  UserAction,\n  UserActions,\n  UserData,\n} from '../../models/redux/user';\nimport { setCookie } from '../../utils/cookies';\nimport createReducer from './createReducer';\n\nconst initialState: UserData = {\n  selectedProjectID: '',\n  username: 'admin',\n  selectedProjectName: 'Default',\n  userRole: 'Owner',\n  name: '',\n  email: '',\n  loader: false,\n  selectedProjectOwner: '',\n};\n\nexport const userData = createReducer<UserData>(initialState, {\n  [UserActions.LOAD_USER_DETAILS](state: UserData, action: UserAction) {\n    try {\n      const jwt = action.payload as string;\n      const data: any = jwtDecode.decode(jwt);\n      const expirationTime = (data.exp - data.iat) / 3600;\n      setCookie('token', jwt, expirationTime);\n\n      return {\n        ...state,\n        ...data,\n      };\n    } catch (err) {\n      console.error('ERROR: ', err);\n      return {\n        ...state,\n      };\n    }\n  },\n  [UserActions.UPDATE_USER_DETAILS](state: UserData, action: UserAction) {\n    return {\n      ...state,\n      ...(action.payload as UpdateUser),\n    };\n  },\n  [UserActions.LOGOUT_USER](state: UserData, action: UserAction) {\n    setCookie('token', '', 1);\n    return {\n      ...initialState,\n    };\n  },\n});\n\nexport default userData;\n"]},"metadata":{},"sourceType":"module"}