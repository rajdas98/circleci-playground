{"ast":null,"code":"import _objectSpread from \"/home/raj/go/src/github.com/litmuschaos/litmus/litmus-portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/raj/go/src/github.com/litmuschaos/litmus/litmus-portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/raj/go/src/github.com/litmuschaos/litmus/litmus-portal/frontend/src/views/Settings/TeammingTab/index.tsx\";\n\nimport { useQuery } from '@apollo/client/react/hooks';\nimport { createStyles, FormControl, InputAdornment, InputLabel, MenuItem, Paper, Select, Table, TableBody, TableCell, TableContainer, TableHead, TablePagination, TableRow, TextField, Toolbar, Typography, withStyles } from '@material-ui/core';\nimport SearchIcon from '@material-ui/icons/Search';\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport { GET_USER } from '../../../graphql';\nimport Invitation from './Invitation';\nimport InviteNew from './InviteNew';\nimport useStyles from './styles';\nimport TableData from './tableData'; // StyledTableCell used to create custom table cell\n\nvar StyledTableCell = withStyles(function (theme) {\n  return createStyles({\n    head: {\n      backgroundColor: theme.palette.homePageCardBackgroundColor,\n      color: theme.palette.teamingTabHeadTextColor\n    },\n    body: {\n      backgroundColor: theme.palette.homePageCardBackgroundColor,\n      fontSize: '0.875rem'\n    }\n  });\n})(TableCell);\n\n// TeammingTab displays team member table\nvar TeammingTab = function TeammingTab() {\n  var _filteredData$length;\n\n  var classes = useStyles();\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  var userData = useSelector(function (state) {\n    return state.userData;\n  }); // for response data\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      rows = _useState2[0],\n      setRows = _useState2[1]; // query for getting all the data for the logged in user\n\n\n  var _useQuery = useQuery(GET_USER, {\n    variables: {\n      username: userData.username\n    },\n    fetchPolicy: 'cache-and-network'\n  }),\n      data = _useQuery.data; // State for pagination\n\n\n  var _useState3 = useState({\n    pageNo: 0,\n    rowsPerPage: 5\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      paginationData = _useState4[0],\n      setPaginationData = _useState4[1]; // States for filters\n\n\n  var _useState5 = useState({\n    search: '',\n    role: 'all'\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      filters = _useState6[0],\n      setFilters = _useState6[1]; // const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n  // logic for displaying the team members of the user\n\n\n  var memberList = [];\n  var users = [];\n  useEffect(function () {\n    if ((data === null || data === void 0 ? void 0 : data.getUser.username) === userData.username) {\n      var projectList = data === null || data === void 0 ? void 0 : data.getUser.projects;\n      projectList.forEach(function (project) {\n        if (project.id === userData.selectedProjectID) {\n          memberList = project.members;\n        }\n      });\n      memberList.forEach(function (member) {\n        if (member.invitation === 'Accepted' && member.user_name !== userData.username) {\n          users.push(member);\n        }\n\n        setRows(users);\n      });\n    }\n  }, [data, userData.selectedProjectID]); // for data filtering based on user role\n\n  var filteredData = rows && rows.filter(function (dataRow) {\n    return dataRow === null || dataRow === void 0 ? void 0 : dataRow.name.toLowerCase().includes(filters.search.toLowerCase());\n  }).filter(function (dataRow) {\n    if (filters.role === 'all') return true;\n    if (filters.role === 'Editor') return dataRow.role === 'Editor';\n    if (filters.role === 'Viewer') return dataRow.role === 'Viewer';\n    return dataRow.role === 'Owner';\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.UMDiv,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.members,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"./icons/user.svg\",\n    alt: \"members\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Typography, {\n    className: classes.memTypo,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }\n  }, t('settings.teamingTab.header'), \" (\", /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }, rows ? rows.length : 0), \")\")), /*#__PURE__*/React.createElement(Typography, {\n    className: classes.descText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }\n  }, t('settings.teamingTab.description'), \":\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Toolbar, {\n    \"data-cy\": \"toolBarComponent\",\n    className: classes.toolbar,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.toolbarFirstCol,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    \"data-cy\": \"teamingSearch\",\n    id: \"input-with-icon-textfield\",\n    placeholder: t('settings.teamingTab.label.search'),\n    value: filters.search,\n    onChange: function onChange(e) {\n      setFilters(_objectSpread(_objectSpread({}, filters), {}, {\n        search: e.target.value\n      }));\n      setPaginationData(_objectSpread(_objectSpread({}, paginationData), {}, {\n        pageNo: 0\n      }));\n    },\n    InputProps: {\n      style: {\n        maxWidth: '15.75rem'\n      },\n      startAdornment: /*#__PURE__*/React.createElement(InputAdornment, {\n        position: \"start\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(SearchIcon, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 23\n        }\n      }))\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.filter,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    variant: \"outlined\",\n    className: classes.formControl,\n    color: \"secondary\",\n    focused: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    className: classes.selectText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 19\n    }\n  }, \"Role\"), /*#__PURE__*/React.createElement(Select, {\n    label: t('settings.teamingTab.label.role'),\n    value: filters.role,\n    onChange: function onChange(event) {\n      setFilters(_objectSpread(_objectSpread({}, filters), {}, {\n        role: event.target.value\n      }));\n      setPaginationData(_objectSpread(_objectSpread({}, paginationData), {}, {\n        pageNo: 0\n      }));\n    },\n    className: classes.selectText,\n    color: \"secondary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"all\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 21\n    }\n  }, t('settings.teamingTab.label.options.all')), /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"Editor\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 21\n    }\n  }, t('settings.teamingTab.label.options.editor')), /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"Viewer\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 21\n    }\n  }, t('settings.teamingTab.label.options.viewer')), /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"Owner\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 21\n    }\n  }, t('settings.teamingTab.label.options.owner')))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.buttonDiv,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Invitation, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(InviteNew, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(Paper, {\n    className: classes.root,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TableContainer, {\n    className: classes.table,\n    elevation: 0,\n    component: Paper,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    stickyHeader: true,\n    \"aria-label\": \"sticky table\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(TableHead, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    className: classes.TR,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(StyledTableCell, {\n    className: classes.styledTC,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 21\n    }\n  }, t('settings.teamingTab.tableCell.name')), /*#__PURE__*/React.createElement(StyledTableCell, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 21\n    }\n  }, t('settings.teamingTab.tableCell.role')), /*#__PURE__*/React.createElement(StyledTableCell, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 21\n    }\n  }, t('settings.teamingTab.tableCell.email')), /*#__PURE__*/React.createElement(StyledTableCell, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 21\n    }\n  }, t('settings.teamingTab.tableCell.joined')), /*#__PURE__*/React.createElement(StyledTableCell, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(TableHead, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 17\n    }\n  }, filteredData && filteredData.length > 0 ? filteredData.slice(paginationData.pageNo * paginationData.rowsPerPage, paginationData.pageNo * paginationData.rowsPerPage + paginationData.rowsPerPage).map(function (row, index) {\n    return /*#__PURE__*/React.createElement(TableRow, {\n      \"data-cy\": \"teamingTableRow\",\n      key: row.name,\n      className: classes.TR,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(TableData, {\n      index: index,\n      row: row,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 27\n      }\n    }));\n  }) : /*#__PURE__*/React.createElement(TableRow, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    colSpan: 5,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    align: \"center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 25\n    }\n  }, t('settings.teamingTab.noUsers'))))))), /*#__PURE__*/React.createElement(TablePagination, {\n    rowsPerPageOptions: [5, 10, 25],\n    component: \"div\",\n    count: (_filteredData$length = filteredData === null || filteredData === void 0 ? void 0 : filteredData.length) !== null && _filteredData$length !== void 0 ? _filteredData$length : 0,\n    rowsPerPage: paginationData.rowsPerPage,\n    page: paginationData.pageNo,\n    onChangePage: function onChangePage(_, page) {\n      return setPaginationData(_objectSpread(_objectSpread({}, paginationData), {}, {\n        pageNo: page\n      }));\n    },\n    onChangeRowsPerPage: function onChangeRowsPerPage(event) {\n      return setPaginationData(_objectSpread(_objectSpread({}, paginationData), {}, {\n        pageNo: 0,\n        rowsPerPage: parseInt(event.target.value, 10)\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 13\n    }\n  })))));\n};\n\nexport default TeammingTab;","map":{"version":3,"sources":["/home/raj/go/src/github.com/litmuschaos/litmus/litmus-portal/frontend/src/views/Settings/TeammingTab/index.tsx"],"names":["useQuery","createStyles","FormControl","InputAdornment","InputLabel","MenuItem","Paper","Select","Table","TableBody","TableCell","TableContainer","TableHead","TablePagination","TableRow","TextField","Toolbar","Typography","withStyles","SearchIcon","React","useEffect","useState","useSelector","useTranslation","GET_USER","Invitation","InviteNew","useStyles","TableData","StyledTableCell","theme","head","backgroundColor","palette","homePageCardBackgroundColor","color","teamingTabHeadTextColor","body","fontSize","TeammingTab","classes","t","userData","state","rows","setRows","variables","username","fetchPolicy","data","pageNo","rowsPerPage","paginationData","setPaginationData","search","role","filters","setFilters","memberList","users","getUser","projectList","projects","forEach","project","id","selectedProjectID","members","member","invitation","user_name","push","filteredData","filter","dataRow","name","toLowerCase","includes","UMDiv","memTypo","length","descText","toolbar","toolbarFirstCol","e","target","value","style","maxWidth","startAdornment","formControl","selectText","event","buttonDiv","root","table","TR","styledTC","slice","map","row","index","_","page","parseInt"],"mappings":"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","sourcesContent":["import { useQuery } from '@apollo/client/react/hooks';\nimport {\n  createStyles,\n  FormControl,\n  InputAdornment,\n  InputLabel,\n  MenuItem,\n  Paper,\n  Select,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TablePagination,\n  TableRow,\n  TextField,\n  Theme,\n  Toolbar,\n  Typography,\n  withStyles,\n} from '@material-ui/core';\nimport SearchIcon from '@material-ui/icons/Search';\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport { GET_USER } from '../../../graphql';\nimport {\n  CurrentUserDedtailsVars,\n  CurrentUserDetails,\n  Member,\n} from '../../../models/graphql/user';\nimport { RootState } from '../../../redux/reducers';\nimport Invitation from './Invitation';\nimport InviteNew from './InviteNew';\nimport useStyles from './styles';\nimport TableData from './tableData';\n\n// StyledTableCell used to create custom table cell\nconst StyledTableCell = withStyles((theme: Theme) =>\n  createStyles({\n    head: {\n      backgroundColor: theme.palette.homePageCardBackgroundColor,\n      color: theme.palette.teamingTabHeadTextColor,\n    },\n    body: {\n      backgroundColor: theme.palette.homePageCardBackgroundColor,\n      fontSize: '0.875rem',\n    },\n  })\n)(TableCell);\n\ninterface FilterOptions {\n  search: string;\n  role: string;\n}\n\ninterface PaginationData {\n  pageNo: number;\n  rowsPerPage: number;\n}\n// TeammingTab displays team member table\nconst TeammingTab: React.FC = () => {\n  const classes = useStyles();\n  const { t } = useTranslation();\n\n  const userData = useSelector((state: RootState) => state.userData);\n\n  // for response data\n  const [rows, setRows] = useState<Member[]>([]);\n\n  // query for getting all the data for the logged in user\n  const { data } = useQuery<CurrentUserDetails, CurrentUserDedtailsVars>(\n    GET_USER,\n    {\n      variables: { username: userData.username },\n      fetchPolicy: 'cache-and-network',\n    }\n  );\n\n  // State for pagination\n  const [paginationData, setPaginationData] = useState<PaginationData>({\n    pageNo: 0,\n    rowsPerPage: 5,\n  });\n\n  // States for filters\n  const [filters, setFilters] = useState<FilterOptions>({\n    search: '',\n    role: 'all',\n  });\n\n  // const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n\n  // logic for displaying the team members of the user\n  let memberList: Member[] = [];\n  const users: Member[] = [];\n  useEffect(() => {\n    if (data?.getUser.username === userData.username) {\n      const projectList = data?.getUser.projects;\n\n      projectList.forEach((project) => {\n        if (project.id === userData.selectedProjectID) {\n          memberList = project.members;\n        }\n      });\n\n      memberList.forEach((member) => {\n        if (\n          member.invitation === 'Accepted' &&\n          member.user_name !== userData.username\n        ) {\n          users.push(member);\n        }\n\n        setRows(users);\n      });\n    }\n  }, [data, userData.selectedProjectID]);\n\n  // for data filtering based on user role\n  const filteredData =\n    rows &&\n    rows\n      .filter((dataRow) =>\n        dataRow?.name.toLowerCase().includes(filters.search.toLowerCase())\n      )\n      .filter((dataRow) => {\n        if (filters.role === 'all') return true;\n        if (filters.role === 'Editor') return dataRow.role === 'Editor';\n        if (filters.role === 'Viewer') return dataRow.role === 'Viewer';\n        return dataRow.role === 'Owner';\n      });\n\n  return (\n    <div>\n      <div className={classes.UMDiv}>\n        <div className={classes.members}>\n          <img src=\"./icons/user.svg\" alt=\"members\" />\n          <Typography className={classes.memTypo}>\n            {t('settings.teamingTab.header')} (\n            <span>{rows ? rows.length : 0}</span>)\n          </Typography>\n        </div>\n        <Typography className={classes.descText}>\n          {t('settings.teamingTab.description')}:\n        </Typography>\n        <div>\n          <Toolbar data-cy=\"toolBarComponent\" className={classes.toolbar}>\n            {/* Search user */}\n            <div className={classes.toolbarFirstCol}>\n              <TextField\n                data-cy=\"teamingSearch\"\n                id=\"input-with-icon-textfield\"\n                placeholder={t('settings.teamingTab.label.search')}\n                value={filters.search}\n                onChange={(e) => {\n                  setFilters({\n                    ...filters,\n                    search: e.target.value,\n                  });\n                  setPaginationData({ ...paginationData, pageNo: 0 });\n                }}\n                InputProps={{\n                  style: {\n                    maxWidth: '15.75rem',\n                  },\n                  startAdornment: (\n                    <InputAdornment position=\"start\">\n                      <SearchIcon />\n                    </InputAdornment>\n                  ),\n                }}\n              />\n              {/* filter menu */}\n              <div className={classes.filter}>\n                <FormControl\n                  variant=\"outlined\"\n                  className={classes.formControl}\n                  color=\"secondary\"\n                  focused\n                >\n                  <InputLabel className={classes.selectText}>Role</InputLabel>\n                  <Select\n                    label={t('settings.teamingTab.label.role')}\n                    value={filters.role}\n                    onChange={(event) => {\n                      setFilters({\n                        ...filters,\n                        role: event.target.value as string,\n                      });\n                      setPaginationData({ ...paginationData, pageNo: 0 });\n                    }}\n                    className={classes.selectText}\n                    color=\"secondary\"\n                  >\n                    <MenuItem value=\"all\">\n                      {t('settings.teamingTab.label.options.all')}\n                    </MenuItem>\n                    <MenuItem value=\"Editor\">\n                      {t('settings.teamingTab.label.options.editor')}\n                    </MenuItem>\n                    <MenuItem value=\"Viewer\">\n                      {t('settings.teamingTab.label.options.viewer')}\n                    </MenuItem>\n                    <MenuItem value=\"Owner\">\n                      {t('settings.teamingTab.label.options.owner')}\n                    </MenuItem>\n                  </Select>\n                </FormControl>\n              </div>\n            </div>\n            <div className={classes.buttonDiv}>\n              <Invitation />\n              <InviteNew />\n            </div>\n          </Toolbar>\n          {/* user table */}\n          <Paper className={classes.root}>\n            <TableContainer\n              className={classes.table}\n              elevation={0}\n              component={Paper}\n            >\n              <Table stickyHeader aria-label=\"sticky table\">\n                <TableHead>\n                  <TableRow className={classes.TR}>\n                    <StyledTableCell className={classes.styledTC}>\n                      {t('settings.teamingTab.tableCell.name')}\n                    </StyledTableCell>\n                    <StyledTableCell>\n                      {t('settings.teamingTab.tableCell.role')}\n                    </StyledTableCell>\n                    <StyledTableCell>\n                      {t('settings.teamingTab.tableCell.email')}\n                    </StyledTableCell>\n                    <StyledTableCell>\n                      {t('settings.teamingTab.tableCell.joined')}\n                    </StyledTableCell>\n                    <StyledTableCell />\n                    <TableHead />\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {filteredData && filteredData.length > 0 ? (\n                    filteredData\n                      .slice(\n                        paginationData.pageNo * paginationData.rowsPerPage,\n                        paginationData.pageNo * paginationData.rowsPerPage +\n                          paginationData.rowsPerPage\n                      )\n                      .map((row, index) => (\n                        <TableRow\n                          data-cy=\"teamingTableRow\"\n                          key={row.name}\n                          className={classes.TR}\n                        >\n                          <TableData index={index} row={row} />\n                        </TableRow>\n                      ))\n                  ) : (\n                    <TableRow>\n                      <TableCell colSpan={5}>\n                        <Typography align=\"center\">\n                          {t('settings.teamingTab.noUsers')}\n                        </Typography>\n                      </TableCell>\n                    </TableRow>\n                  )}\n                </TableBody>\n              </Table>\n            </TableContainer>\n            <TablePagination\n              rowsPerPageOptions={[5, 10, 25]}\n              component=\"div\"\n              count={filteredData?.length ?? 0}\n              rowsPerPage={paginationData.rowsPerPage}\n              page={paginationData.pageNo}\n              onChangePage={(_, page) =>\n                setPaginationData({\n                  ...paginationData,\n                  pageNo: page,\n                })\n              }\n              onChangeRowsPerPage={(event) =>\n                setPaginationData({\n                  ...paginationData,\n                  pageNo: 0,\n                  rowsPerPage: parseInt(event.target.value, 10),\n                })\n              }\n            />\n          </Paper>\n        </div>\n      </div>\n    </div>\n  );\n};\nexport default TeammingTab;\n"]},"metadata":{},"sourceType":"module"}