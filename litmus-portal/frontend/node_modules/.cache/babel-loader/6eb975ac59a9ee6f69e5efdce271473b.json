{"ast":null,"code":"/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar Lib = require('../../lib');\n\nvar Registry = require('../../registry');\n\nvar Color = require('../../components/color');\n\nvar handleGroupingDefaults = require('../bar/defaults').handleGroupingDefaults;\n\nvar autoType = require('../../plots/cartesian/axis_autotype');\n\nvar attributes = require('./attributes');\n\nfunction supplyDefaults(traceIn, traceOut, defaultColor, layout) {\n  function coerce(attr, dflt) {\n    return Lib.coerce(traceIn, traceOut, attributes, attr, dflt);\n  }\n\n  handleSampleDefaults(traceIn, traceOut, coerce, layout);\n  if (traceOut.visible === false) return;\n  var hasPreCompStats = traceOut._hasPreCompStats;\n\n  if (hasPreCompStats) {\n    coerce('lowerfence');\n    coerce('upperfence');\n  }\n\n  coerce('line.color', (traceIn.marker || {}).color || defaultColor);\n  coerce('line.width');\n  coerce('fillcolor', Color.addOpacity(traceOut.line.color, 0.5));\n  var boxmeanDflt = false;\n\n  if (hasPreCompStats) {\n    var mean = coerce('mean');\n    var sd = coerce('sd');\n\n    if (mean && mean.length) {\n      boxmeanDflt = true;\n      if (sd && sd.length) boxmeanDflt = 'sd';\n    }\n  }\n\n  coerce('boxmean', boxmeanDflt);\n  coerce('whiskerwidth');\n  coerce('width');\n  coerce('quartilemethod');\n  var notchedDflt = false;\n\n  if (hasPreCompStats) {\n    var notchspan = coerce('notchspan');\n\n    if (notchspan && notchspan.length) {\n      notchedDflt = true;\n    }\n  } else if (Lib.validate(traceIn.notchwidth, attributes.notchwidth)) {\n    notchedDflt = true;\n  }\n\n  var notched = coerce('notched', notchedDflt);\n  if (notched) coerce('notchwidth');\n  handlePointsDefaults(traceIn, traceOut, coerce, {\n    prefix: 'box'\n  });\n}\n\nfunction handleSampleDefaults(traceIn, traceOut, coerce, layout) {\n  function getDims(arr) {\n    var dims = 0;\n\n    if (arr && arr.length) {\n      dims += 1;\n\n      if (Lib.isArrayOrTypedArray(arr[0]) && arr[0].length) {\n        dims += 1;\n      }\n    }\n\n    return dims;\n  }\n\n  function valid(astr) {\n    return Lib.validate(traceIn[astr], attributes[astr]);\n  }\n\n  var y = coerce('y');\n  var x = coerce('x');\n  var sLen;\n\n  if (traceOut.type === 'box') {\n    var q1 = coerce('q1');\n    var median = coerce('median');\n    var q3 = coerce('q3');\n    traceOut._hasPreCompStats = q1 && q1.length && median && median.length && q3 && q3.length;\n    sLen = Math.min(Lib.minRowLength(q1), Lib.minRowLength(median), Lib.minRowLength(q3));\n  }\n\n  var yDims = getDims(y);\n  var xDims = getDims(x);\n  var yLen = yDims && Lib.minRowLength(y);\n  var xLen = xDims && Lib.minRowLength(x);\n  var defaultOrientation, len;\n\n  if (traceOut._hasPreCompStats) {\n    switch (String(xDims) + String(yDims)) {\n      // no x / no y\n      case '00':\n        var setInX = valid('x0') || valid('dx');\n        var setInY = valid('y0') || valid('dy');\n\n        if (setInY && !setInX) {\n          defaultOrientation = 'h';\n        } else {\n          defaultOrientation = 'v';\n        }\n\n        len = sLen;\n        break;\n      // just x\n\n      case '10':\n        defaultOrientation = 'v';\n        len = Math.min(sLen, xLen);\n        break;\n\n      case '20':\n        defaultOrientation = 'h';\n        len = Math.min(sLen, x.length);\n        break;\n      // just y\n\n      case '01':\n        defaultOrientation = 'h';\n        len = Math.min(sLen, yLen);\n        break;\n\n      case '02':\n        defaultOrientation = 'v';\n        len = Math.min(sLen, y.length);\n        break;\n      // both\n\n      case '12':\n        defaultOrientation = 'v';\n        len = Math.min(sLen, xLen, y.length);\n        break;\n\n      case '21':\n        defaultOrientation = 'h';\n        len = Math.min(sLen, x.length, yLen);\n        break;\n\n      case '11':\n        // this one is ill-defined\n        len = 0;\n        break;\n\n      case '22':\n        var hasCategories = false;\n        var i;\n\n        for (i = 0; i < x.length; i++) {\n          if (autoType(x[i]) === 'category') {\n            hasCategories = true;\n            break;\n          }\n        }\n\n        if (hasCategories) {\n          defaultOrientation = 'v';\n          len = Math.min(sLen, xLen, y.length);\n        } else {\n          for (i = 0; i < y.length; i++) {\n            if (autoType(y[i]) === 'category') {\n              hasCategories = true;\n              break;\n            }\n          }\n\n          if (hasCategories) {\n            defaultOrientation = 'h';\n            len = Math.min(sLen, x.length, yLen);\n          } else {\n            defaultOrientation = 'v';\n            len = Math.min(sLen, xLen, y.length);\n          }\n        }\n\n        break;\n    }\n  } else if (yDims > 0) {\n    defaultOrientation = 'v';\n\n    if (xDims > 0) {\n      len = Math.min(xLen, yLen);\n    } else {\n      len = Math.min(yLen);\n    }\n  } else if (xDims > 0) {\n    defaultOrientation = 'h';\n    len = Math.min(xLen);\n  } else {\n    len = 0;\n  }\n\n  if (!len) {\n    traceOut.visible = false;\n    return;\n  }\n\n  traceOut._length = len;\n  var orientation = coerce('orientation', defaultOrientation); // these are just used for positioning, they never define the sample\n\n  if (traceOut._hasPreCompStats) {\n    if (orientation === 'v' && xDims === 0) {\n      coerce('x0', 0);\n      coerce('dx', 1);\n    } else if (orientation === 'h' && yDims === 0) {\n      coerce('y0', 0);\n      coerce('dy', 1);\n    }\n  } else {\n    if (orientation === 'v' && xDims === 0) {\n      coerce('x0');\n    } else if (orientation === 'h' && yDims === 0) {\n      coerce('y0');\n    }\n  }\n\n  var handleCalendarDefaults = Registry.getComponentMethod('calendars', 'handleTraceDefaults');\n  handleCalendarDefaults(traceIn, traceOut, ['x', 'y'], layout);\n}\n\nfunction handlePointsDefaults(traceIn, traceOut, coerce, opts) {\n  var prefix = opts.prefix;\n  var outlierColorDflt = Lib.coerce2(traceIn, traceOut, attributes, 'marker.outliercolor');\n  var lineoutliercolor = coerce('marker.line.outliercolor');\n  var modeDflt = 'outliers';\n\n  if (traceOut._hasPreCompStats) {\n    modeDflt = 'all';\n  } else if (outlierColorDflt || lineoutliercolor) {\n    modeDflt = 'suspectedoutliers';\n  }\n\n  var mode = coerce(prefix + 'points', modeDflt);\n\n  if (mode) {\n    coerce('jitter', mode === 'all' ? 0.3 : 0);\n    coerce('pointpos', mode === 'all' ? -1.5 : 0);\n    coerce('marker.symbol');\n    coerce('marker.opacity');\n    coerce('marker.size');\n    coerce('marker.color', traceOut.line.color);\n    coerce('marker.line.color');\n    coerce('marker.line.width');\n\n    if (mode === 'suspectedoutliers') {\n      coerce('marker.line.outliercolor', traceOut.marker.color);\n      coerce('marker.line.outlierwidth');\n    }\n\n    coerce('selected.marker.color');\n    coerce('unselected.marker.color');\n    coerce('selected.marker.size');\n    coerce('unselected.marker.size');\n    coerce('text');\n    coerce('hovertext');\n  } else {\n    delete traceOut.marker;\n  }\n\n  var hoveron = coerce('hoveron');\n\n  if (hoveron === 'all' || hoveron.indexOf('points') !== -1) {\n    coerce('hovertemplate');\n  }\n\n  Lib.coerceSelectionMarkerOpacity(traceOut, coerce);\n}\n\nfunction crossTraceDefaults(fullData, fullLayout) {\n  var traceIn, traceOut;\n\n  function coerce(attr) {\n    return Lib.coerce(traceOut._input, traceOut, attributes, attr);\n  }\n\n  for (var i = 0; i < fullData.length; i++) {\n    traceOut = fullData[i];\n    var traceType = traceOut.type;\n\n    if (traceType === 'box' || traceType === 'violin') {\n      traceIn = traceOut._input;\n\n      if (fullLayout[traceType + 'mode'] === 'group') {\n        handleGroupingDefaults(traceIn, traceOut, fullLayout, coerce);\n      }\n    }\n  }\n}\n\nmodule.exports = {\n  supplyDefaults: supplyDefaults,\n  crossTraceDefaults: crossTraceDefaults,\n  handleSampleDefaults: handleSampleDefaults,\n  handlePointsDefaults: handlePointsDefaults\n};","map":{"version":3,"sources":["/home/raj/go/src/github.com/litmuschaos/litmus/litmus-portal/frontend/node_modules/plotly.js/src/traces/box/defaults.js"],"names":["Lib","require","Registry","Color","handleGroupingDefaults","autoType","attributes","supplyDefaults","traceIn","traceOut","defaultColor","layout","coerce","attr","dflt","handleSampleDefaults","visible","hasPreCompStats","_hasPreCompStats","marker","color","addOpacity","line","boxmeanDflt","mean","sd","length","notchedDflt","notchspan","validate","notchwidth","notched","handlePointsDefaults","prefix","getDims","arr","dims","isArrayOrTypedArray","valid","astr","y","x","sLen","type","q1","median","q3","Math","min","minRowLength","yDims","xDims","yLen","xLen","defaultOrientation","len","String","setInX","setInY","hasCategories","i","_length","orientation","handleCalendarDefaults","getComponentMethod","opts","outlierColorDflt","coerce2","lineoutliercolor","modeDflt","mode","hoveron","indexOf","coerceSelectionMarkerOpacity","crossTraceDefaults","fullData","fullLayout","_input","traceType","module","exports"],"mappings":"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","sourcesContent":["/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\n'use strict';\n\nvar Lib = require('../../lib');\nvar Registry = require('../../registry');\nvar Color = require('../../components/color');\nvar handleGroupingDefaults = require('../bar/defaults').handleGroupingDefaults;\nvar autoType = require('../../plots/cartesian/axis_autotype');\nvar attributes = require('./attributes');\n\nfunction supplyDefaults(traceIn, traceOut, defaultColor, layout) {\n    function coerce(attr, dflt) {\n        return Lib.coerce(traceIn, traceOut, attributes, attr, dflt);\n    }\n\n    handleSampleDefaults(traceIn, traceOut, coerce, layout);\n    if(traceOut.visible === false) return;\n\n    var hasPreCompStats = traceOut._hasPreCompStats;\n\n    if(hasPreCompStats) {\n        coerce('lowerfence');\n        coerce('upperfence');\n    }\n\n    coerce('line.color', (traceIn.marker || {}).color || defaultColor);\n    coerce('line.width');\n    coerce('fillcolor', Color.addOpacity(traceOut.line.color, 0.5));\n\n    var boxmeanDflt = false;\n    if(hasPreCompStats) {\n        var mean = coerce('mean');\n        var sd = coerce('sd');\n        if(mean && mean.length) {\n            boxmeanDflt = true;\n            if(sd && sd.length) boxmeanDflt = 'sd';\n        }\n    }\n    coerce('boxmean', boxmeanDflt);\n\n    coerce('whiskerwidth');\n    coerce('width');\n    coerce('quartilemethod');\n\n    var notchedDflt = false;\n    if(hasPreCompStats) {\n        var notchspan = coerce('notchspan');\n        if(notchspan && notchspan.length) {\n            notchedDflt = true;\n        }\n    } else if(Lib.validate(traceIn.notchwidth, attributes.notchwidth)) {\n        notchedDflt = true;\n    }\n    var notched = coerce('notched', notchedDflt);\n    if(notched) coerce('notchwidth');\n\n    handlePointsDefaults(traceIn, traceOut, coerce, {prefix: 'box'});\n}\n\nfunction handleSampleDefaults(traceIn, traceOut, coerce, layout) {\n    function getDims(arr) {\n        var dims = 0;\n        if(arr && arr.length) {\n            dims += 1;\n            if(Lib.isArrayOrTypedArray(arr[0]) && arr[0].length) {\n                dims += 1;\n            }\n        }\n        return dims;\n    }\n\n    function valid(astr) {\n        return Lib.validate(traceIn[astr], attributes[astr]);\n    }\n\n    var y = coerce('y');\n    var x = coerce('x');\n\n    var sLen;\n    if(traceOut.type === 'box') {\n        var q1 = coerce('q1');\n        var median = coerce('median');\n        var q3 = coerce('q3');\n\n        traceOut._hasPreCompStats = (\n            q1 && q1.length &&\n            median && median.length &&\n            q3 && q3.length\n        );\n        sLen = Math.min(\n            Lib.minRowLength(q1),\n            Lib.minRowLength(median),\n            Lib.minRowLength(q3)\n        );\n    }\n\n    var yDims = getDims(y);\n    var xDims = getDims(x);\n    var yLen = yDims && Lib.minRowLength(y);\n    var xLen = xDims && Lib.minRowLength(x);\n\n    var defaultOrientation, len;\n    if(traceOut._hasPreCompStats) {\n        switch(String(xDims) + String(yDims)) {\n            // no x / no y\n            case '00':\n                var setInX = valid('x0') || valid('dx');\n                var setInY = valid('y0') || valid('dy');\n\n                if(setInY && !setInX) {\n                    defaultOrientation = 'h';\n                } else {\n                    defaultOrientation = 'v';\n                }\n\n                len = sLen;\n                break;\n            // just x\n            case '10':\n                defaultOrientation = 'v';\n                len = Math.min(sLen, xLen);\n                break;\n            case '20':\n                defaultOrientation = 'h';\n                len = Math.min(sLen, x.length);\n                break;\n            // just y\n            case '01':\n                defaultOrientation = 'h';\n                len = Math.min(sLen, yLen);\n                break;\n            case '02':\n                defaultOrientation = 'v';\n                len = Math.min(sLen, y.length);\n                break;\n            // both\n            case '12':\n                defaultOrientation = 'v';\n                len = Math.min(sLen, xLen, y.length);\n                break;\n            case '21':\n                defaultOrientation = 'h';\n                len = Math.min(sLen, x.length, yLen);\n                break;\n            case '11':\n                // this one is ill-defined\n                len = 0;\n                break;\n            case '22':\n                var hasCategories = false;\n                var i;\n                for(i = 0; i < x.length; i++) {\n                    if(autoType(x[i]) === 'category') {\n                        hasCategories = true;\n                        break;\n                    }\n                }\n\n                if(hasCategories) {\n                    defaultOrientation = 'v';\n                    len = Math.min(sLen, xLen, y.length);\n                } else {\n                    for(i = 0; i < y.length; i++) {\n                        if(autoType(y[i]) === 'category') {\n                            hasCategories = true;\n                            break;\n                        }\n                    }\n\n                    if(hasCategories) {\n                        defaultOrientation = 'h';\n                        len = Math.min(sLen, x.length, yLen);\n                    } else {\n                        defaultOrientation = 'v';\n                        len = Math.min(sLen, xLen, y.length);\n                    }\n                }\n                break;\n        }\n    } else if(yDims > 0) {\n        defaultOrientation = 'v';\n        if(xDims > 0) {\n            len = Math.min(xLen, yLen);\n        } else {\n            len = Math.min(yLen);\n        }\n    } else if(xDims > 0) {\n        defaultOrientation = 'h';\n        len = Math.min(xLen);\n    } else {\n        len = 0;\n    }\n\n    if(!len) {\n        traceOut.visible = false;\n        return;\n    }\n    traceOut._length = len;\n\n    var orientation = coerce('orientation', defaultOrientation);\n\n    // these are just used for positioning, they never define the sample\n    if(traceOut._hasPreCompStats) {\n        if(orientation === 'v' && xDims === 0) {\n            coerce('x0', 0);\n            coerce('dx', 1);\n        } else if(orientation === 'h' && yDims === 0) {\n            coerce('y0', 0);\n            coerce('dy', 1);\n        }\n    } else {\n        if(orientation === 'v' && xDims === 0) {\n            coerce('x0');\n        } else if(orientation === 'h' && yDims === 0) {\n            coerce('y0');\n        }\n    }\n\n    var handleCalendarDefaults = Registry.getComponentMethod('calendars', 'handleTraceDefaults');\n    handleCalendarDefaults(traceIn, traceOut, ['x', 'y'], layout);\n}\n\nfunction handlePointsDefaults(traceIn, traceOut, coerce, opts) {\n    var prefix = opts.prefix;\n\n    var outlierColorDflt = Lib.coerce2(traceIn, traceOut, attributes, 'marker.outliercolor');\n    var lineoutliercolor = coerce('marker.line.outliercolor');\n\n    var modeDflt = 'outliers';\n    if(traceOut._hasPreCompStats) {\n        modeDflt = 'all';\n    } else if(outlierColorDflt || lineoutliercolor) {\n        modeDflt = 'suspectedoutliers';\n    }\n\n    var mode = coerce(prefix + 'points', modeDflt);\n\n    if(mode) {\n        coerce('jitter', mode === 'all' ? 0.3 : 0);\n        coerce('pointpos', mode === 'all' ? -1.5 : 0);\n\n        coerce('marker.symbol');\n        coerce('marker.opacity');\n        coerce('marker.size');\n        coerce('marker.color', traceOut.line.color);\n        coerce('marker.line.color');\n        coerce('marker.line.width');\n\n        if(mode === 'suspectedoutliers') {\n            coerce('marker.line.outliercolor', traceOut.marker.color);\n            coerce('marker.line.outlierwidth');\n        }\n\n        coerce('selected.marker.color');\n        coerce('unselected.marker.color');\n        coerce('selected.marker.size');\n        coerce('unselected.marker.size');\n\n        coerce('text');\n        coerce('hovertext');\n    } else {\n        delete traceOut.marker;\n    }\n\n    var hoveron = coerce('hoveron');\n    if(hoveron === 'all' || hoveron.indexOf('points') !== -1) {\n        coerce('hovertemplate');\n    }\n\n    Lib.coerceSelectionMarkerOpacity(traceOut, coerce);\n}\n\nfunction crossTraceDefaults(fullData, fullLayout) {\n    var traceIn, traceOut;\n\n    function coerce(attr) {\n        return Lib.coerce(traceOut._input, traceOut, attributes, attr);\n    }\n\n    for(var i = 0; i < fullData.length; i++) {\n        traceOut = fullData[i];\n        var traceType = traceOut.type;\n\n        if(traceType === 'box' || traceType === 'violin') {\n            traceIn = traceOut._input;\n            if(fullLayout[traceType + 'mode'] === 'group') {\n                handleGroupingDefaults(traceIn, traceOut, fullLayout, coerce);\n            }\n        }\n    }\n}\n\nmodule.exports = {\n    supplyDefaults: supplyDefaults,\n    crossTraceDefaults: crossTraceDefaults,\n\n    handleSampleDefaults: handleSampleDefaults,\n    handlePointsDefaults: handlePointsDefaults\n};\n"]},"metadata":{},"sourceType":"script"}