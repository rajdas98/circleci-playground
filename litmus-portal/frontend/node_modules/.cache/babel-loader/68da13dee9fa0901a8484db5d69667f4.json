{"ast":null,"code":"/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar Fx = require('../../components/fx');\n\nvar Lib = require('../../lib');\n\nvar constants = require('./constants');\n\nmodule.exports = function hoverPoints(pointData, xval, yval) {\n  var cd0 = pointData.cd[0];\n  var trace = cd0.trace;\n  var xa = pointData.xa;\n  var ya = pointData.ya; // Return early if not on image\n\n  if (Fx.inbox(xval - cd0.x0, xval - (cd0.x0 + cd0.w * trace.dx), 0) > 0 || Fx.inbox(yval - cd0.y0, yval - (cd0.y0 + cd0.h * trace.dy), 0) > 0) {\n    return;\n  } // Find nearest pixel's index\n\n\n  var nx = Math.floor((xval - cd0.x0) / trace.dx);\n  var ny = Math.floor(Math.abs(yval - cd0.y0) / trace.dy); // return early if pixel is undefined\n\n  if (!cd0.z[ny][nx]) return;\n  var hoverinfo = cd0.hi || trace.hoverinfo;\n  var fmtColor;\n\n  if (hoverinfo) {\n    var parts = hoverinfo.split('+');\n    if (parts.indexOf('all') !== -1) parts = ['color'];\n    if (parts.indexOf('color') !== -1) fmtColor = true;\n  }\n\n  var colormodel = trace.colormodel;\n  var dims = colormodel.length;\n\n  var c = trace._scaler(cd0.z[ny][nx]);\n\n  var s = constants.colormodel[colormodel].suffix;\n  var colorstring = [];\n\n  if (trace.hovertemplate || fmtColor) {\n    colorstring.push('[' + [c[0] + s[0], c[1] + s[1], c[2] + s[2]].join(', '));\n    if (dims === 4) colorstring.push(', ' + c[3] + s[3]);\n    colorstring.push(']');\n    colorstring = colorstring.join('');\n    pointData.extraText = colormodel.toUpperCase() + ': ' + colorstring;\n  }\n\n  var text;\n\n  if (Array.isArray(trace.hovertext) && Array.isArray(trace.hovertext[ny])) {\n    text = trace.hovertext[ny][nx];\n  } else if (Array.isArray(trace.text) && Array.isArray(trace.text[ny])) {\n    text = trace.text[ny][nx];\n  } // TODO: for color model with 3 dims, display something useful for hovertemplate `%{color[3]}`\n\n\n  var py = ya.c2p(cd0.y0 + (ny + 0.5) * trace.dy);\n  var xVal = cd0.x0 + (nx + 0.5) * trace.dx;\n  var yVal = cd0.y0 + (ny + 0.5) * trace.dy;\n  var zLabel = '[' + cd0.z[ny][nx].slice(0, trace.colormodel.length).join(', ') + ']';\n  return [Lib.extendFlat(pointData, {\n    index: [ny, nx],\n    x0: xa.c2p(cd0.x0 + nx * trace.dx),\n    x1: xa.c2p(cd0.x0 + (nx + 1) * trace.dx),\n    y0: py,\n    y1: py,\n    color: c,\n    xVal: xVal,\n    xLabelVal: xVal,\n    yVal: yVal,\n    yLabelVal: yVal,\n    zLabelVal: zLabel,\n    text: text,\n    hovertemplateLabels: {\n      'zLabel': zLabel,\n      'colorLabel': colorstring,\n      'color[0]Label': c[0] + s[0],\n      'color[1]Label': c[1] + s[1],\n      'color[2]Label': c[2] + s[2],\n      'color[3]Label': c[3] + s[3]\n    }\n  })];\n};","map":{"version":3,"sources":["/home/raj/go/src/github.com/litmuschaos/litmus/litmus-portal/frontend/node_modules/plotly.js/src/traces/image/hover.js"],"names":["Fx","require","Lib","constants","module","exports","hoverPoints","pointData","xval","yval","cd0","cd","trace","xa","ya","inbox","x0","w","dx","y0","h","dy","nx","Math","floor","ny","abs","z","hoverinfo","hi","fmtColor","parts","split","indexOf","colormodel","dims","length","c","_scaler","s","suffix","colorstring","hovertemplate","push","join","extraText","toUpperCase","text","Array","isArray","hovertext","py","c2p","xVal","yVal","zLabel","slice","extendFlat","index","x1","y1","color","xLabelVal","yLabelVal","zLabelVal","hovertemplateLabels"],"mappings":"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","sourcesContent":["/**\n* Copyright 2012-2020, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n\n'use strict';\n\nvar Fx = require('../../components/fx');\nvar Lib = require('../../lib');\nvar constants = require('./constants');\n\nmodule.exports = function hoverPoints(pointData, xval, yval) {\n    var cd0 = pointData.cd[0];\n    var trace = cd0.trace;\n    var xa = pointData.xa;\n    var ya = pointData.ya;\n\n    // Return early if not on image\n    if(Fx.inbox(xval - cd0.x0, xval - (cd0.x0 + cd0.w * trace.dx), 0) > 0 ||\n            Fx.inbox(yval - cd0.y0, yval - (cd0.y0 + cd0.h * trace.dy), 0) > 0) {\n        return;\n    }\n\n    // Find nearest pixel's index\n    var nx = Math.floor((xval - cd0.x0) / trace.dx);\n    var ny = Math.floor(Math.abs(yval - cd0.y0) / trace.dy);\n\n    // return early if pixel is undefined\n    if(!cd0.z[ny][nx]) return;\n\n    var hoverinfo = cd0.hi || trace.hoverinfo;\n    var fmtColor;\n    if(hoverinfo) {\n        var parts = hoverinfo.split('+');\n        if(parts.indexOf('all') !== -1) parts = ['color'];\n        if(parts.indexOf('color') !== -1) fmtColor = true;\n    }\n\n    var colormodel = trace.colormodel;\n    var dims = colormodel.length;\n    var c = trace._scaler(cd0.z[ny][nx]);\n    var s = constants.colormodel[colormodel].suffix;\n\n    var colorstring = [];\n    if(trace.hovertemplate || fmtColor) {\n        colorstring.push('[' + [c[0] + s[0], c[1] + s[1], c[2] + s[2]].join(', '));\n        if(dims === 4) colorstring.push(', ' + c[3] + s[3]);\n        colorstring.push(']');\n        colorstring = colorstring.join('');\n        pointData.extraText = colormodel.toUpperCase() + ': ' + colorstring;\n    }\n\n    var text;\n    if(Array.isArray(trace.hovertext) && Array.isArray(trace.hovertext[ny])) {\n        text = trace.hovertext[ny][nx];\n    } else if(Array.isArray(trace.text) && Array.isArray(trace.text[ny])) {\n        text = trace.text[ny][nx];\n    }\n\n    // TODO: for color model with 3 dims, display something useful for hovertemplate `%{color[3]}`\n    var py = ya.c2p(cd0.y0 + (ny + 0.5) * trace.dy);\n    var xVal = cd0.x0 + (nx + 0.5) * trace.dx;\n    var yVal = cd0.y0 + (ny + 0.5) * trace.dy;\n    var zLabel = '[' + cd0.z[ny][nx].slice(0, trace.colormodel.length).join(', ') + ']';\n    return [Lib.extendFlat(pointData, {\n        index: [ny, nx],\n        x0: xa.c2p(cd0.x0 + nx * trace.dx),\n        x1: xa.c2p(cd0.x0 + (nx + 1) * trace.dx),\n        y0: py,\n        y1: py,\n        color: c,\n        xVal: xVal,\n        xLabelVal: xVal,\n        yVal: yVal,\n        yLabelVal: yVal,\n        zLabelVal: zLabel,\n        text: text,\n        hovertemplateLabels: {\n            'zLabel': zLabel,\n            'colorLabel': colorstring,\n            'color[0]Label': c[0] + s[0],\n            'color[1]Label': c[1] + s[1],\n            'color[2]Label': c[2] + s[2],\n            'color[3]Label': c[3] + s[3]\n        }\n    })];\n};\n"]},"metadata":{},"sourceType":"script"}